# IEC 60870-5-101 Драйвер протоколу клієнта

Цей драйвер реалізує клієнт для протоколу IEC 101. За необхідності, він може мати кілька підключень до серверів IEC-101 на декількох комп’ютерах.

Для конфігурації драйвера необхідно створити один або кілька екземплярів драйвера і принаймні для підключення на кожен екземпляр. Також теги, призначені для оновлення, повинні бути налаштовані належним чином.

## Налаштуйте екземпляр драйвера

Щоб створити новий екземпляр клієнта IEC 101, вставте новий документ у колекцію _protocolDriverInsests_, використовуючи таку команду:

use json_scada_db_name
    db.protocolDriverInstances.insert({
            protocolDriver: "IEC60870-5-101",
            protocolDriverInstanceNumber: 1,
            enabled: true,
            logLevel: 1,
            nodeNames: ["mainNode"], 
            activeNodeName: "mainNode",
            activeNodeKeepAliveTimeTag: new Date(),
            keepProtocolRunningWhileInactive: false
        });

* _**protocolDriver**_ [String] - ім'я драйвера протоколу, має бути "IEC60870-5-101". **Обов’язковий параметр**.
* _**protocolDriverInstanceNumber**_ [Double] - номер екземпляра. Використовуйте від 1 до N, щоб пронумерувати екземпляри. Для одного і того ж драйвера номери екземплярів повинні бути унікальними. Номер екземпляра дозволяє запустити використання кількох процесів драйвера, кожен з різною конфігурацією. **Обов’язковий параметр**.
* _**увімкнено**_ [логічне значення] - керує ввімкненням екземпляра. Використовуйте тут false, щоб вимкнути екземпляр. **Обов’язковий параметр**.
* _**logLevel**_ [Double] - код номера для рівня журналу (0 = мінімальний, 1 = основний, 2 = детальний, 3 = налагоджений). Занадто багато реєстрації (рівні 2 та 3) може вплинути на продуктивність. **Обов’язковий параметр**.
* _**nodeNames**_ [Array of Strings] - масив імен вузлів, які можуть запускати екземпляр. Використовуйте більше одного вузла для надмірності. Кожен надлишковий екземпляр, що працює на окремих вузлах, матиме однакові підключення та дані, увімкнені для сканування та оновлення. **Обов’язковий параметр**.
* _**activeNodeName**_ [String] - ім'я драйвера протоколу, який активний на даний момент. Це оновлено драйверами для контролю надмірності. **Необов’язково**.
* _**activeNodeKeepAliveTimeTag**_ [Дата] - це регулярно оновлюється активним драйвером. **Необов’язково**.
* _**keepProtocolRunningWhileInactive**_ [логічне значення] - Визначте драйвер, який буде підтримувати протокол, а не основний активний драйвер. В даний час підтримується лише значення _false_. **Необов’язково**.

Зміни в конфігурації _protocolDriverInsests_ вимагають перезапуску процесів екземплярів драйвера, щоб бути ефективними.

## Налаштуйте підключення клієнта до серверів IEC-101

У кожному екземплярі цього драйвера може бути визначено багато клієнтських підключень, які повинні бути описані в колекції _protocolConnections_.

    use json_scada_db_name
    db.protocolConnections.insert({
        protocolDriver: "IEC60870-5-101",
        protocolDriverInstanceNumber: 1,
        protocolConnectionNumber: 62,
        name: "KAK1",
        description: "KAK1 Station IEC-101",
        enabled: true,
        commandsEnabled: true,
        portName: "COM3", 
        baudRate: 9600,
        parity: "Even",
        stopBits: "One",
        handshake: "None",
        timeoutForACK: 1000,
        timeoutRepeat: 1000,
        useSingleCharACK: true,
        sizeOfLinkAddress: 1,
        localLinkAddress: 1,
        remoteLinkAddress: 206,
        sizeOfCOT: 1,
        sizeOfCA: 1,
        sizeOfIOA: 2,
        giInterval: 300,
        testCommandInterval: 15,
        timeSyncInterval: 650
    });

* _**protocolDriver**_ [String] - ім'я драйвера протоколу, має бути "IEC60870-5-101". **Обов’язковий параметр**.
* _**protocolDriverInstanceNumber**_ [Double] - номер екземпляра. Використовуйте від 1 до N, щоб пронумерувати екземпляри. Для одного і того ж драйвера номери екземплярів повинні бути унікальними. Номер екземпляра дозволяє запустити використання кількох процесів драйвера, кожен з різною конфігурацією. **Обов’язковий параметр**.
* _**protocolConnectionNumber**_ [Double] - Номерний номер для підключення протоколу. Це повинно бути унікальним для всіх підключень усіх драйверів системи. Цей номер використовується для визначення з'єднання, яке може оновити тег. **Обов’язковий параметр**.
* _**ім'я**_ [String] - Ім'я для з'єднання. Використовуватиметься для лісозаготівлі. **Обов’язковий параметр**.
* _**опис**_ [String] - Опис з метою підключення. Просто документально. **Необов’язковий параметр**.
* _**увімкнено**_ [логічне значення] - керує ввімкненням з'єднання. Використовуйте тут false, щоб вимкнути з’єднання. **Обов’язковий параметр**.
* _**commandEnabled**_ [Boolean] - Дозволяє вимкнути команди (повідомлення в напрямку управління) для з'єднання. Використовуйте тут false, щоб вимкнути команди. **Обов’язковий параметр**.
* _**portName**_ [String] - назва порту Comm, наприклад "COM1", "/ dev / ttyS0", "192.168.0.1:2410" для TCP-адреси: порт. **Обов’язковий параметр**.
* _**baudRate**_ [Double] - швидкість передачі даних в порт кому. **Обов’язковий параметр**.
* _**парність**_ [String] - парність портів зв'язку Четне | Немає | Непарне | Позначити | Пробіл. **Обов’язковий параметр**.
